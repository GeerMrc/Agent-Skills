# LoadingçŠ¶æ€ - è§†è§‰æè¿°ä¸äº¤äº’è®¾è®¡

> ğŸ¨ **è§†è§‰è®¾è®¡è§„èŒƒ** - CSSå®ç°ã€äº¤äº’è¡Œä¸ºå’Œæ— éšœç¢è¦æ±‚

---

## ğŸ“– æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£æä¾› Loading çŠ¶æ€çš„è¯¦ç»†è§†è§‰è®¾è®¡è§„èŒƒã€äº¤äº’è¡Œä¸ºå®šä¹‰å’Œæ— éšœç¢è¦æ±‚ã€‚

**ç›¸å…³æ–‡æ¡£**ï¼š
- [è¿”å›ä¸»æ–‡æ¡£](component-states-loading.md)
- [åŠ è½½æ¨¡å¼ä¸å®ç°](component-states-loading-patterns.md)

---

## ğŸ¨ è§†è§‰æè¿°

### è®¾è®¡è§„èŒƒ

```css
/* æŒ‰é’®åŠ è½½çŠ¶æ€ */
.button.is-loading {
  position: relative;
  color: transparent;
  pointer-events: none;
}

.button.is-loading::after {
  content: "";
  position: absolute;
  width: 1em;
  height: 1em;
  top: 50%;
  left: 50%;
  margin-left: -0.5em;
  margin-top: -0.5em;
  border: 2px solid currentColor;
  border-radius: 50%;
  border-right-color: transparent;
  animation: spin 0.6s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* éª¨æ¶å±åŠ è½½ */
.skeleton {
  background: linear-gradient(
    90deg,
    var(--color-skeleton-start) 25%,
    var(--color-skeleton-middle) 50%,
    var(--color-skeleton-end) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: var(--radius-md);
}

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* è¿›åº¦æ¡ */
.progress-bar {
  height: 4px;
  background: var(--color-bg-progress);
  border-radius: var(--radius-full);
  overflow: hidden;
}

.progress-bar-fill {
  height: 100%;
  background: var(--color-primary);
  transition: width 0.3s ease;
  animation: progress-pulse 1.5s infinite;
}

@keyframes progress-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}
```

### è®¾è®¡è¦ç‚¹

**1. åŠ è½½æŒ‡ç¤ºå™¨é€‰æ‹©**
- æ—‹è½¬åœ†ç¯ï¼šè½»é‡çº§ï¼Œé€šç”¨
- è¿›åº¦æ¡ï¼šæ˜¾ç¤ºå…·ä½“è¿›åº¦
- éª¨æ¶å±ï¼šä¿æŒå¸ƒå±€ç»“æ„
- æ¨¡ç³Šè¦†ç›–ï¼šåŒºåŸŸåˆ’åˆ†æ˜ç¡®

**2. è§†è§‰å°ºå¯¸è¦æ±‚**
- æ—‹è½¬åœ†ç¯è‡³å°‘ 16Ã—16px
- è¿›åº¦æ¡é«˜åº¦ 4-8px
- éª¨æ¶å±ä¸å®é™…å†…å®¹åŒå°ºå¯¸
- ç¡®ä¿è¶³å¤Ÿçš„å¯¹æ¯”åº¦

**3. äº¤äº’å¤„ç†**
- `pointer-events: none` é˜²æ­¢é‡å¤ç‚¹å‡»
- ä¿æŒæŒ‰é’®/ç»„ä»¶å®½åº¦é¿å…æŠ–åŠ¨
- åŠ è½½ä¸­ç¦ç”¨æ‰€æœ‰äº¤äº’

**4. å¸ƒå±€ç¨³å®šæ€§**
- é¢„ç•™åŠ è½½æŒ‡ç¤ºå™¨ç©ºé—´
- é¿å…åŠ è½½å®Œæˆåå¸ƒå±€å˜åŒ–
- ä½¿ç”¨å ä½ç¬¦ä¿æŒç©ºé—´

### åŠ¨ç”»æ•ˆæœ

**æ—‹è½¬åŠ¨ç”»ï¼ˆSpinnerï¼‰**ï¼š
- çº¿æ€§åŒ€é€Ÿæ—‹è½¬
- æ¨èé€Ÿåº¦ï¼š0.6s ä¸€åœˆ
- ä¿æŒè¿ç»­æ€§ï¼Œæ— å¡é¡¿

**é—ªçƒåŠ¨ç”»ï¼ˆSkeletonï¼‰**ï¼š
- æ¸å˜èƒŒæ™¯ç§»åŠ¨
- æ¨èé€Ÿåº¦ï¼š1.5s å¾ªç¯
- æ¨¡æ‹Ÿå†…å®¹åŠ è½½æ•ˆæœ

**è„‰å†²åŠ¨ç”»ï¼ˆProgressï¼‰**ï¼š
- é€æ˜åº¦å˜åŒ–
- æ¨èé€Ÿåº¦ï¼š1.5s å¾ªç¯
- å¸å¼•ç”¨æˆ·æ³¨æ„åŠ›

---

## ğŸ–±ï¸ äº¤äº’è¡Œä¸º

### æ ‡å‡†è¡Œä¸º

**åŠ è½½å¼€å§‹æ—¶**ï¼š
- æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨
- ç¦ç”¨ç”¨æˆ·äº¤äº’
- ä¿æŒç»„ä»¶å°ºå¯¸
- éšè—æˆ–é®ç½©å†…å®¹

**åŠ è½½è¿›è¡Œä¸­**ï¼š
- æŒç»­æ˜¾ç¤ºåŠ¨ç”»æ•ˆæœ
- æ›´æ–°è¿›åº¦ï¼ˆå¦‚æœå¯è®¡ç®—ï¼‰
- ä¿æŒç”¨æˆ·ç­‰å¾…çŠ¶æ€

**åŠ è½½å®Œæˆå**ï¼š
- ç§»é™¤åŠ è½½æŒ‡ç¤ºå™¨
- æ¢å¤æ­£å¸¸äº¤äº’
- æ˜¾ç¤ºåŠ è½½å†…å®¹æˆ–é”™è¯¯
- é€šçŸ¥ç”¨æˆ·åŠ è½½å®Œæˆ

### äº¤äº’é™åˆ¶

| äº¤äº’ç±»å‹ | åŠ è½½ä¸­è¡Œä¸º | è¯´æ˜ |
|---------|----------|------|
| é¼ æ ‡ç‚¹å‡» | æ— æ•ˆ | é˜²æ­¢é‡å¤æäº¤ |
| é”®ç›˜æ“ä½œ | ç¦ç”¨ | Enter/Spaceæ— æ•ˆ |
| è§¦æ‘¸æ“ä½œ | æ— æ•ˆ | ç§»åŠ¨ç«¯ç‚¹å‡»æ— æ•ˆ |
| ç„¦ç‚¹ç®¡ç† | ä¿æŒ | ä¸ç§»é™¤å½“å‰ç„¦ç‚¹ |

### çŠ¶æ€è½¬æ¢

```javascript
// çŠ¶æ€æœºç¤ºä¾‹
const LoadingState = {
  IDLE: 'idle',       // ç©ºé—²
  LOADING: 'loading', // åŠ è½½ä¸­
  SUCCESS: 'success', // æˆåŠŸ
  ERROR: 'error'      // å¤±è´¥
};

// çŠ¶æ€è½¬æ¢
// IDLE â†’ LOADING â†’ SUCCESS/ERROR â†’ IDLE
```

---

## â™¿ æ— éšœç¢è¦æ±‚

### ARIAå±æ€§

**æŒ‰é’®åŠ è½½çŠ¶æ€**ï¼š
```html
<button class="button is-loading"
        aria-busy="true"
        aria-live="polite">
  <span class="spinner" aria-hidden="true"></span>
  <span class="sr-only">åŠ è½½ä¸­...</span>
</button>
```

**è¿›åº¦æ¡**ï¼š
```html
<div role="progressbar"
     aria-valuenow="60"
     aria-valuemin="0"
     aria-valuemax="100"
     aria-label="ä¸Šä¼ è¿›åº¦">
  <div class="progress-bar" style="width: 60%"></div>
</div>
```

**å…¨å±€åŠ è½½çŠ¶æ€**ï¼š
```html
<div aria-live="assertive" aria-atomic="true">
  <p>æ­£åœ¨åŠ è½½æ•°æ®ï¼Œè¯·ç¨å€™...</p>
</div>
```

### ARIAå±æ€§è¯´æ˜

| å±æ€§ | ç”¨é€” | å¿…éœ€æ€§ |
|------|------|--------|
| `aria-busy="true"` | æ ‡è®°åŠ è½½çŠ¶æ€ | å¿…éœ€ |
| `aria-live="polite"` | éç´§æ€¥çŠ¶æ€æ›´æ–° | æ¨è |
| `aria-live="assertive"` | ç´§æ€¥çŠ¶æ€æ›´æ–° | ç‰¹å®šåœºæ™¯ |
| `aria-atomic="true"` | æ•´ä½“å†…å®¹æ›´æ–° | å…¨å±€åŠ è½½ |
| `aria-label` | æè¿°åŠ è½½å†…å®¹ | è¿›åº¦æ¡å¿…éœ€ |
| `aria-valuenow` | å½“å‰è¿›åº¦å€¼ | è¿›åº¦æ¡å¿…éœ€ |
| `aria-valuemin` | æœ€å°è¿›åº¦å€¼ | è¿›åº¦æ¡å¿…éœ€ |
| `aria-valuemax` | æœ€å¤§è¿›åº¦å€¼ | è¿›åº¦æ¡å¿…éœ€ |
| `aria-hidden="true"` | éšè—è£…é¥°æ€§å…ƒç´  | æ¨èç”¨äºspinner |

### å±å¹•é˜…è¯»å™¨æ”¯æŒ

**âœ… DOï¼ˆæ¨èï¼‰**ï¼š
1. ä½¿ç”¨ `aria-busy="true"` æ ‡è®°åŠ è½½çŠ¶æ€
2. æä¾›å±å¹•é˜…è¯»å™¨æ–‡å­—æç¤º
3. åŠ è½½å®Œæˆåé€šçŸ¥çŠ¶æ€å˜åŒ–
4. è¿›åº¦å¯è®¡ç®—æ—¶æä¾›å…·ä½“æ•°å€¼

**âŒ DON'Tï¼ˆé¿å…ï¼‰**ï¼š
1. åŠ è½½æŒ‡ç¤ºå™¨è¿‡å°æˆ–å¯¹æ¯”åº¦ä¸è¶³
2. æ²¡æœ‰å±å¹•é˜…è¯»å™¨æ–‡å­—æç¤º
3. åŠ è½½æ—¶é—´è¿‡çŸ­ï¼ˆ< 500msï¼‰å¯¼è‡´é—ªçƒ
4. ä¸é€šçŸ¥ç”¨æˆ·åŠ è½½å®Œæˆ

### é”®ç›˜å¯¼èˆª

**åŠ è½½æœŸé—´**ï¼š
- ç¦ç”¨æ‰€æœ‰å¯èšç„¦å…ƒç´ 
- ç§»é™¤ `tabindex` æˆ–è®¾ç½®ä¸º `-1`
- ä¿æŒ `aria-busy` çŠ¶æ€

**åŠ è½½å®Œæˆå**ï¼š
- æ¢å¤æ‰€æœ‰å¯èšç„¦å…ƒç´ 
- ç§»é™¤ `aria-busy` çŠ¶æ€
- é€šçŸ¥å±å¹•é˜…è¯»å™¨çŠ¶æ€å˜åŒ–

### WCAG AA åˆè§„

**å¯¹æ¯”åº¦è¦æ±‚**ï¼š
- åŠ è½½æŒ‡ç¤ºå™¨ä¸èƒŒæ™¯å¯¹æ¯”åº¦ â‰¥ 4.5:1
- è¿›åº¦æ¡ä¸èƒŒæ™¯å¯¹æ¯”åº¦ â‰¥ 3:1

**åŠ¨ç”»æ§åˆ¶**ï¼š
- å°Šé‡ç”¨æˆ·çš„ `prefers-reduced-motion` è®¾ç½®
- æä¾›åœæ­¢åŠ¨ç”»çš„æ–¹æ³•

```css
@media (prefers-reduced-motion: reduce) {
  .spinner,
  .skeleton,
  .progress-bar-fill {
    animation: none;
  }
}
```

---

## ğŸ“ å°ºå¯¸è§„èŒƒ

### æ—‹è½¬åœ†ç¯ï¼ˆSpinnerï¼‰

| å°ºå¯¸ | é€‚ç”¨åœºæ™¯ | æ¨èå€¼ |
|------|----------|--------|
| å°å‹ | æŒ‰é’®ã€å°ç»„ä»¶ | 16Ã—16px - 20Ã—20px |
| ä¸­å‹ | è¡¨å•ã€å¡ç‰‡ | 24Ã—24px - 32Ã—32px |
| å¤§å‹ | é¡µé¢ã€åŒºå— | 40Ã—40px - 48Ã—48px |

### è¿›åº¦æ¡ï¼ˆProgress Barï¼‰

| å±æ€§ | æ¨èå€¼ | è¯´æ˜ |
|------|--------|------|
| é«˜åº¦ | 4-8px | è§†è§‰å¹³è¡¡ |
| åœ†è§’ | full | å®Œå…¨åœ†è§’ |
| åŠ¨ç”»æ—¶é•¿ | 0.3s | å¹³æ»‘è¿‡æ¸¡ |

### éª¨æ¶å±ï¼ˆSkeletonï¼‰

| å±æ€§ | æ¨èå€¼ | è¯´æ˜ |
|------|--------|------|
| é«˜åº¦ | ä¸å®é™…å†…å®¹ç›¸åŒ | é¿å…å¸ƒå±€è·³åŠ¨ |
| åœ†è§’ | ä¸å®é™…å†…å®¹ç›¸åŒ | ä¿æŒä¸€è‡´æ€§ |
| åŠ¨ç”»æ—¶é•¿ | 1.5s | æ¨¡æ‹ŸåŠ è½½æ•ˆæœ |

---

## ğŸ­ åŠ¨ç”»æ€§èƒ½

### æ€§èƒ½ä¼˜åŒ–

**ä½¿ç”¨ GPU åŠ é€Ÿ**ï¼š
```css
.spinner {
  will-change: transform;
  transform: translateZ(0);
}
```

**é¿å…é‡æ’é‡ç»˜**ï¼š
```css
/* âœ… æ¨è */
.spinner {
  transform: rotate(360deg);
}

/* âŒ é¿å… */
.spinner {
  width: 20px;
  height: 20px;
  /* é¢‘ç¹æ”¹å˜å°ºå¯¸å¯¼è‡´é‡æ’ */
}
```

**ä½¿ç”¨ requestAnimationFrame**ï¼š
```javascript
function updateProgress(percent) {
  requestAnimationFrame(() => {
    progressBar.style.width = `${percent}%`;
  });
}
```

### åŠ¨ç”»æ—¶é•¿å»ºè®®

| åŠ¨ç”»ç±»å‹ | æ¨èæ—¶é•¿ | è¯´æ˜ |
|---------|----------|------|
| Spinneræ—‹è½¬ | 0.6s - 1s | åŒ€é€Ÿçº¿æ€§ |
| Skeletoné—ªçƒ | 1.5s - 2s | æ¸å˜ç§»åŠ¨ |
| Progressè„‰å†² | 1.5s - 2s | é€æ˜åº¦å˜åŒ– |
| æ·¡å…¥æ·¡å‡º | 0.3s | çŠ¶æ€åˆ‡æ¢ |

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [è¿”å›ä¸»æ–‡æ¡£](component-states-loading.md)
- [åŠ è½½æ¨¡å¼ä¸å®ç°](component-states-loading-patterns.md)
- [ç»„ä»¶çŠ¶æ€æ€»è§ˆ](component-states.md)
- [æ— éšœç¢æŒ‡å—](../accessibility.md)

---

> **æœ€åæ›´æ–°**: 2026-01-05
> **ç»´æŠ¤è€…**: Frontend Design Agent Skills é¡¹ç›®å›¢é˜Ÿ
